if (self.CavalryLogger) { CavalryLogger.start_js(["yoGbK"]); }

__d("VideoChannelEntryPoint",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CASTING:"casting",GROUP:"group",NEWSFEED:"newsfeed",PAGE:"page",PROFILE:"profile",SAVED_STORY:"saved_story",SEARCH:"search",SEARCH_TOPIC_MEDIA:"search_topic_media",PERMALINK:"permalink",WWW_RHC:"www_rhc",VIDEO_HOME:"video_home",VIDEO_HOME_LATEST_FROM_PAGES_CHANNEL:"video_home_latest_from_pages_channel",VIDEO_HOME_SAVED_CHANNEL:"video_home_saved_channel",VIDEO_HOME_SHARED_WITH_YOU_CHANNEL:"video_home_shared_with_you_channel",VIDEO_HOME_TOP_CHANNEL:"video_home_top_channel",VIDEO_HOME_WATCHED_CHANNEL:"video_home_watched_channel",UNKNOWN:"unknown",LIVE_MAP:"live_map",PLAYLIST:"playlist"};}),null);
__d("VideoChannel",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null,i={get:function j(){return h;},set:function j(k){h=k;}};f.exports=i;}),null);
__d('FeedVideoClickToPlayController',['Event','Set','VideoPlayerAbortLoadingExperiment','VideoPlayerReason','destroyOnUnload','throttle'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null;function i(j){'use strict';this.$FeedVideoClickToPlayController2=new (c('Set'))();this.$FeedVideoClickToPlayController1=null;this.$FeedVideoClickToPlayController3=j||{};c('destroyOnUnload')(function(){this.$FeedVideoClickToPlayController2.clear();if(this.$FeedVideoClickToPlayController1){this.$FeedVideoClickToPlayController1.remove();this.$FeedVideoClickToPlayController1=null;}if(this===h)h=null;}.bind(this));}i.prototype.addVideoUnit=function(j){'use strict';if(!this.$FeedVideoClickToPlayController4())this.$FeedVideoClickToPlayController5();j.addListener('beginPlayback',function(k){var l=k.reason;if(l===c('VideoPlayerReason').USER||l===c('VideoPlayerReason').LOOP)this.$FeedVideoClickToPlayController2.add(j);}.bind(this));j.addListener('turnOffAutoplay',function(k){var l=k.reason;if(l==='unmuted')this.$FeedVideoClickToPlayController2.add(j);}.bind(this));if(j.getVideoPlayerController().isState('playing')&&!j.isAutoplayable())this.$FeedVideoClickToPlayController2.add(j);j.addListener('pausePlayback',function(){this.$FeedVideoClickToPlayController2['delete'](j);}.bind(this));j.addListener('finishPlayback',function(){this.$FeedVideoClickToPlayController2['delete'](j);}.bind(this));};i.registerVideoUnit=function(j,k){'use strict';if(h==null)h=new i(k);h.addVideoUnit(j);};i.prototype.$FeedVideoClickToPlayController5=function(){'use strict';if(this.$FeedVideoClickToPlayController1)this.$FeedVideoClickToPlayController1.remove();this.$FeedVideoClickToPlayController1=c('Event').listen(window,'scroll',c('throttle')(this.onScroll.bind(this),300));};i.prototype.$FeedVideoClickToPlayController4=function(){'use strict';return !!this.$FeedVideoClickToPlayController1;};i.prototype.$FeedVideoClickToPlayController6=function(j){'use strict';j.pause(c('VideoPlayerReason').AUTOPLAY);if(c('VideoPlayerAbortLoadingExperiment').canAbort)j.abortLoading();this.$FeedVideoClickToPlayController2['delete'](j);};i.prototype.onScroll=function(){'use strict';this.$FeedVideoClickToPlayController2.forEach(function(j){if(j&&!j.isVisible()&&!j.getIsInChannel()){var k=j.getVideoPlayerController();if(k.isAd()&&!this.$FeedVideoClickToPlayController3.allowAdsToPlay){this.$FeedVideoClickToPlayController6(j);}else if(k.isMuted()&&k.isState('playing')){this.$FeedVideoClickToPlayController6(j);k.emit('resumeAutoplay');}}}.bind(this));};f.exports=i;}),null);
__d('VideoClickForMoreOverlay',['cx','CSS','EventListener','VideoPlayerUIComponentDrawer','DOM'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k,l){'use strict';this.$VideoClickForMoreOverlay1=j;this.$VideoClickForMoreOverlay2=k;this.$VideoClickForMoreOverlay3=false;this.$VideoClickForMoreOverlay4=this.$VideoClickForMoreOverlay1.registerDrawer(c('VideoPlayerUIComponentDrawer').priorities.ClickForMore,l?i.REDESIGN_HEIGHT:i.DEFAULT_HEIGHT);this.$VideoClickForMoreOverlay4.addListener('reposition',this.$VideoClickForMoreOverlay5.bind(this));this.$VideoClickForMoreOverlay1.addListener('VideoControls/visibilityUpdate',function(n){var o=n.areControlsVisible;return (this.$VideoClickForMoreOverlay6(o));}.bind(this));var m=this.$VideoClickForMoreOverlay1.getOption('VideoControls','areControlsVisible');if(m)this.$VideoClickForMoreOverlay6(m);this.$VideoClickForMoreOverlay1.addListener('stateChange',this.$VideoClickForMoreOverlay7.bind(this));c('EventListener').listen(this.$VideoClickForMoreOverlay2,'click',function(){return this.$VideoClickForMoreOverlay8();}.bind(this));}i.prototype.$VideoClickForMoreOverlay5=function(j){'use strict';c('DOM').setAttributes(this.$VideoClickForMoreOverlay2,{style:'bottom:'+j+'px;'});};i.prototype.$VideoClickForMoreOverlay6=function(j){'use strict';this.$VideoClickForMoreOverlay3=j;this.$VideoClickForMoreOverlay7();};i.prototype.$VideoClickForMoreOverlay7=function(){'use strict';var j=!this.$VideoClickForMoreOverlay1.isPlayerVersion('silvercity')&&!this.$VideoClickForMoreOverlay1.getIsInChannel()&&this.$VideoClickForMoreOverlay1.isState('playing');if(j&&this.$VideoClickForMoreOverlay3){this.$VideoClickForMoreOverlay9();}else this.$VideoClickForMoreOverlay10();};i.prototype.$VideoClickForMoreOverlay8=function(){'use strict';this.$VideoClickForMoreOverlay1.clickVideo();};i.prototype.$VideoClickForMoreOverlay9=function(){'use strict';c('CSS').removeClass(this.$VideoClickForMoreOverlay2,"_2is8");this.$VideoClickForMoreOverlay4.reserve();};i.prototype.$VideoClickForMoreOverlay10=function(){'use strict';c('CSS').addClass(this.$VideoClickForMoreOverlay2,"_2is8");this.$VideoClickForMoreOverlay4.release();};i.DEFAULT_HEIGHT=18;i.REDESIGN_HEIGHT=38;f.exports=i;}),null);
__d('VideoAutoplayPlayerBase',['EventEmitter'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('EventEmitter'));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);}j.prototype.isVisible=function(){'use strict';throw new Error('Should be overridden');};j.prototype.getDistanceToViewport=function(){'use strict';throw new Error('Should be overridden');};j.prototype.logDisplayed=function(){'use strict';throw new Error('Should be overridden');};j.prototype.playWithoutUnmute=function(k){'use strict';throw new Error('Should be overridden');};j.prototype.pause=function(k){'use strict';throw new Error('Should be overridden');};j.prototype.isAutoplayable=function(){'use strict';throw new Error('Should be overridden');};j.prototype.getDOMPosition=function(){'use strict';throw new Error('Should be overridden');};j.prototype.isLooping=function(){'use strict';throw new Error('Should be overridden');};f.exports=j;}),null);
__d('FeedVideoPlayerController',['csx','Arbiter','AttachmentRelatedShareConstants','DOM','DOMQuery','LitestandStoryInsertionStatus','Run','Set','SubscriptionsHandler','VideoAutoplayPlayerBase','VideoPlayerApiEvents','VideoPlayerExperiments','VideoPlayerFallbackEvents','VideoPlayerLoggerErrors','VideoPlayerLoggerErrorStates','VideoPlayerLoggerEvent','VideoPlayerReason','VideoPlayerStates','getElementPosition','getViewportDimensions'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('VideoPlayerExperiments').autoplayUntilHalfGone?.5:1,l=42;i=babelHelpers.inherits(m,c('VideoAutoplayPlayerBase'));j=i&&i.prototype;function m(n,o){'use strict';j.constructor.call(this);this.$FeedVideoPlayerController1=o;this.$FeedVideoPlayerController2=n;this.$FeedVideoPlayerController3=new (c('Set'))();if(!this.$FeedVideoPlayerController1.viewport_autoplay)this.$FeedVideoPlayerController3.add('server_blocked');this.$FeedVideoPlayerController4=this.isAutoplayable();this.$FeedVideoPlayerController6=o.controller;this.$FeedVideoPlayerController10=o.startsMuted;this.$FeedVideoPlayerController7=this.isAutoplayable();if(this.$FeedVideoPlayerController6.getIsInChannel()||this.$FeedVideoPlayerController6.isState(c('VideoPlayerStates').PLAYING)&&!this.$FeedVideoPlayerController6.isMuted())this.$FeedVideoPlayerController7=false;this.$FeedVideoPlayerController6.registerOption('FeedAutoplay','isAutoplaying',function(){return this.$FeedVideoPlayerController7;}.bind(this),function(p){this.$FeedVideoPlayerController7=p;}.bind(this));this.$FeedVideoPlayerController6.registerOption('FeedAutoplay','isVisibleForAutoplay',function(){return this.isVisible();}.bind(this));this.$FeedVideoPlayerController6.registerOption('FeedAutoplay','shouldOpenSidePaneInChannelView',function(){return o.autoPlayWithChannelViewOrSnowlift;});this.$FeedVideoPlayerController6.setLogEntryPropertyGetters({autoplay_eligible:function(){return this.isAutoplayable();}.bind(this),autoplay_failure_reasons:function(){return (JSON.stringify(Array.from(this.$FeedVideoPlayerController3)));}.bind(this)});this.$FeedVideoPlayerController12();c('Run').onLeave(function(){this.$FeedVideoPlayerController5.release();}.bind(this));if(this.$FeedVideoPlayerController13(c('VideoPlayerStates').FALLBACK)){this.$FeedVideoPlayerController14();this.$FeedVideoPlayerController15();return;}this.$FeedVideoPlayerController5.addSubscriptions(c('LitestandStoryInsertionStatus').registerBlocker(function(){return this.$FeedVideoPlayerController13(c('VideoPlayerStates').PLAYING);}.bind(this)));}m.prototype.$FeedVideoPlayerController16=function(){'use strict';return !!this.$FeedVideoPlayerController1.show_play_button_on_finish;};m.prototype.getDistanceToViewport=function(){'use strict';if(this.$FeedVideoPlayerController6.isFullscreen())return 0;var n=c('getViewportDimensions')().height,o=this.getDOMPosition();if(o.height===0)return -Infinity;var p=o.y+(1-k)*o.height;return p-n/2;};m.prototype.isVisible=function(){'use strict';if(this.$FeedVideoPlayerController6.isFullscreen())return true;var n=c('getViewportDimensions')().height,o=c('getViewportDimensions')().width,p=this.getDOMPosition();if(p.height===0)return false;var q=p.y-l+(1-k)*p.height,r=p.y+k*p.height,s=p.x+(1-k)*p.width,t=p.x+k*p.width;if(q<0||r>=n||s<0||t>=o)return false;var u=this.$FeedVideoPlayerController17();if(u!==null)return this.$FeedVideoPlayerController18(p,c('getElementPosition')(u));return true;};m.prototype.$FeedVideoPlayerController17=function(){'use strict';var n=c('DOMQuery').scry(this.$FeedVideoPlayerController2.video_container,"^div._1yj5");if(n.length>0)return n[0];return null;};m.prototype.$FeedVideoPlayerController18=function(n,o){'use strict';var p=n.x,q=n.x+n.width,r=o.x,s=o.x+o.width;return r<p&&q<s;};m.prototype.isAutoplayable=function(){'use strict';return this.$FeedVideoPlayerController1.viewport_autoplay&&!this.$FeedVideoPlayerController9&&!this.$FeedVideoPlayerController3.length;};m.prototype.$FeedVideoPlayerController19=function(n){'use strict';if(this.$FeedVideoPlayerController4){this.$FeedVideoPlayerController4=false;this.$FeedVideoPlayerController6.unmute();}this.$FeedVideoPlayerController6.play(n);};m.prototype.getCurrentTimePosition=function(){'use strict';return this.$FeedVideoPlayerController6.getCurrentTimePosition();};m.prototype.playWithoutUnmute=function(n){'use strict';this.$FeedVideoPlayerController6.play(n);};m.prototype.getVideoID=function(){'use strict';return this.$FeedVideoPlayerController6.getVideoID();};m.prototype.$FeedVideoPlayerController20=function(){'use strict';this.$FeedVideoPlayerController15();};m.prototype.$FeedVideoPlayerController12=function(){'use strict';this.$FeedVideoPlayerController5=new (c('SubscriptionsHandler'))();var n=[['finishPlayback',function(){return this.$FeedVideoPlayerController21();}.bind(this)],['turnOffAutoplay',function(p){return (this.$FeedVideoPlayerController22(p.reason));}.bind(this)],['unmuteVideo',function(){return this.$FeedVideoPlayerController23();}.bind(this)],['stateChange',function(){return this.$FeedVideoPlayerController24();}.bind(this)],['switchVideo',function(){return this.$FeedVideoPlayerController20();}.bind(this)],['fallbackPlay',function(){return this.$FeedVideoPlayerController25();}.bind(this)],['buffered',function(){return this.$FeedVideoPlayerController15();}.bind(this)],['buffering',function(){return this.$FeedVideoPlayerController15();}.bind(this)],['beginPlayback',function(p){var q=p.reason;return this.$FeedVideoPlayerController26(q);}.bind(this)],['toggleFullscreen',function(){return this.$FeedVideoPlayerController27();}.bind(this)],['resumeAutoplay',function(){return this.$FeedVideoPlayerController28();}.bind(this)]],o=function(event){return this.emit.bind(this,event);}.bind(this);this.$FeedVideoPlayerController5.addSubscriptions.apply(this.$FeedVideoPlayerController5,n.map(function(p){return this.$FeedVideoPlayerController6.addListener.apply(this.$FeedVideoPlayerController6,p);}.bind(this)).concat(c('VideoPlayerApiEvents').map(function(event){return this.$FeedVideoPlayerController6.addListener(event,o(event));}.bind(this))));};m.prototype.$FeedVideoPlayerController27=function(){'use strict';if(this.$FeedVideoPlayerController10)this.$FeedVideoPlayerController6.unmute();};m.prototype.$FeedVideoPlayerController24=function(){'use strict';if(this.$FeedVideoPlayerController6.isState(c('VideoPlayerStates').FALLBACK))this.$FeedVideoPlayerController14();if(!this.$FeedVideoPlayerController6.isState(c('VideoPlayerStates').LOADING)&&this.$FeedVideoPlayerController8){clearTimeout(this.$FeedVideoPlayerController8);this.$FeedVideoPlayerController8=null;}this.$FeedVideoPlayerController15();};m.prototype.$FeedVideoPlayerController26=function(n){'use strict';if(n===c('VideoPlayerReason').USER&&this.$FeedVideoPlayerController10)this.$FeedVideoPlayerController6.unmute();};m.prototype.preload=function(){'use strict';if(this.$FeedVideoPlayerController6.preload)this.$FeedVideoPlayerController6.preload();};m.prototype.logDisplayed=function(){'use strict';this.$FeedVideoPlayerController6.logEvent(c('VideoPlayerLoggerEvent').DISPLAYED,{autoplay_reason:this.$FeedVideoPlayerController1.autoplay_reason});};m.prototype.$FeedVideoPlayerController25=function(){'use strict';var n={error:c('VideoPlayerLoggerErrors').ENTERED_FALLBACK,state:c('VideoPlayerLoggerErrorStates').PLAYBACK_FAILURE};this.$FeedVideoPlayerController6.logEvent(c('VideoPlayerLoggerEvent').ERROR,n);};m.prototype.$FeedVideoPlayerController23=function(){'use strict';this.$FeedVideoPlayerController10=false;this.$FeedVideoPlayerController29();this.$FeedVideoPlayerController7=false;};m.prototype.$FeedVideoPlayerController21=function(){'use strict';var n=this.$FeedVideoPlayerController6.getOption('Looping','isLooping');if(!n)this.$FeedVideoPlayerController30('has_seen_finished');};m.prototype.$FeedVideoPlayerController14=function(){'use strict';this.$FeedVideoPlayerController11={isAutoplaying:this.$FeedVideoPlayerController7,preventAutoplay:this.$FeedVideoPlayerController9};this.$FeedVideoPlayerController30(c('VideoPlayerStates').FALLBACK);};m.prototype.$FeedVideoPlayerController30=function(n){'use strict';this.$FeedVideoPlayerController9=true;this.$FeedVideoPlayerController3.add(n);this.$FeedVideoPlayerController7=false;};m.prototype.$FeedVideoPlayerController28=function(){'use strict';this.$FeedVideoPlayerController7=true;this.$FeedVideoPlayerController3['delete']('unmuted');this.$FeedVideoPlayerController3['delete']('has_seen_finished');this.$FeedVideoPlayerController3['delete']('manually_paused');this.$FeedVideoPlayerController9=this.$FeedVideoPlayerController3.length>0;};m.prototype.$FeedVideoPlayerController22=function(n){'use strict';this.$FeedVideoPlayerController30(n);this.$FeedVideoPlayerController7=false;};m.prototype.$FeedVideoPlayerController15=function(){'use strict';this.$FeedVideoPlayerController31();};m.prototype.getDOMPosition=function(){'use strict';return this.$FeedVideoPlayerController6.getDOMPosition();};m.prototype.isLooping=function(){'use strict';return !!this.$FeedVideoPlayerController6.getOption('Looping','isLooping');};m.prototype.pause=function(n){'use strict';this.$FeedVideoPlayerController6.pause(n);};m.prototype.$FeedVideoPlayerController32=function(){'use strict';this.$FeedVideoPlayerController12();this.$FeedVideoPlayerController3['delete'](c('VideoPlayerStates').FALLBACK);this.$FeedVideoPlayerController7=this.$FeedVideoPlayerController11.isAutoplaying;this.$FeedVideoPlayerController9=this.$FeedVideoPlayerController11.preventAutoplay;};m.prototype.$FeedVideoPlayerController31=function(){var n,o=this;'use strict';if(this.$FeedVideoPlayerController13(c('VideoPlayerStates').FALLBACK)){this.$FeedVideoPlayerController5.release();var p=this.$FeedVideoPlayerController2;if(p.fallback_link){c('DOM').remove(this.$FeedVideoPlayerController6.getVideoNode());c('DOM').replace(p.video_container,p.fallback_link);c('DOM').appendContent(p.fallback_link,p.video_container);}if(this.$FeedVideoPlayerController6.isFallbackRecoverable()){this.$FeedVideoPlayerController32();}else (function(){var q=o.$FeedVideoPlayerController6.addListener(c('VideoPlayerFallbackEvents').RECOVER,function(){this.$FeedVideoPlayerController32();q.remove();}.bind(o));})();}};m.prototype.$FeedVideoPlayerController29=function(){'use strict';c('Arbiter').inform(c('AttachmentRelatedShareConstants').FBVIDEO_CLICK,{attachment:this.$FeedVideoPlayerController2.video_container,fbvideo_id:this.$FeedVideoPlayerController1.video_ids[0]});};m.prototype.$FeedVideoPlayerController13=function(n){'use strict';return this.$FeedVideoPlayerController6.isState(n);};m.prototype.getIsInChannel=function(){'use strict';return this.$FeedVideoPlayerController6.getIsInChannel();};m.prototype.getVideoPlayerController=function(){'use strict';return this.$FeedVideoPlayerController6;};m.prototype.abortLoading=function(){'use strict';if(!this.$FeedVideoPlayerController1.abort_loading_blocked)this.$FeedVideoPlayerController6.abortLoading();};f.exports=m;}),null);
__d('VideoAutoplayControllerBase',['Arbiter','DesktopHscrollUnitEventConstants','Event','VideoPlayerAbortLoadingExperiment','VideoPlayerReason','Visibility','destroyOnUnload','SubscriptionsHandler','throttle'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.$VideoAutoplayControllerBase3=null;this.$VideoAutoplayControllerBase2=null;this.$VideoAutoplayControllerBase6=[];this.$VideoAutoplayControllerBase1=i;this.$VideoAutoplayControllerBase4=null;this.$VideoAutoplayControllerBase5=new (c('SubscriptionsHandler'))();c('destroyOnUnload')(function(){this.$VideoAutoplayControllerBase6=[];this.$VideoAutoplayControllerBase3=null;if(this.$VideoAutoplayControllerBase4){this.$VideoAutoplayControllerBase4.remove();this.$VideoAutoplayControllerBase4=null;}this.$VideoAutoplayControllerBase5.release();}.bind(this));}h.prototype.getVideoUnits=function(){'use strict';return this.$VideoAutoplayControllerBase6;};h.prototype.setVideoUnits=function(i){'use strict';this.$VideoAutoplayControllerBase6=i;};h.prototype.addVideoUnit=function(i){'use strict';this.$VideoAutoplayControllerBase6.push(i);};h.prototype.getPlayingVideoUnit=function(){'use strict';return this.$VideoAutoplayControllerBase3;};h.prototype.setPlayingVideoUnit=function(i){'use strict';this.$VideoAutoplayControllerBase3=i;if(this.$VideoAutoplayControllerBase3)this.setupPlayingVideoUnitSubscriptions();};h.prototype.playVideo=function(i,j){'use strict';this.setPlayingVideoUnit(i);if(this.$VideoAutoplayControllerBase3)this.$VideoAutoplayControllerBase3.playWithoutUnmute(j);};h.prototype.setupPlayingVideoUnitSubscriptions=function(){'use strict';throw new Error('Should be overridden');};h.prototype.addSubscriberVideoUnit=function(){'use strict';if(!this.getVideoUnits().length){this.$VideoAutoplayControllerBase5.addSubscriptions(c('Event').listen(window,'resize',this.updateAutoplay.bind(this)),c('Event').listen(window,'blur',this.$VideoAutoplayControllerBase7.bind(this)),c('Event').listen(window,'focus',this.$VideoAutoplayControllerBase8.bind(this)),c('Visibility').addListener(c('Visibility').HIDDEN,this.$VideoAutoplayControllerBase7.bind(this)),c('Visibility').addListener(c('Visibility').VISIBLE,this.$VideoAutoplayControllerBase8.bind(this)),c('Arbiter').subscribe(c('DesktopHscrollUnitEventConstants').HSCROLL_ITEM_SHOWN_EVENT,this.updateAutoplay.bind(this)));if(!this.$VideoAutoplayControllerBase9())this.$VideoAutoplayControllerBase10();}};h.prototype.$VideoAutoplayControllerBase7=function(){'use strict';if(!this.$VideoAutoplayControllerBase2){this.$VideoAutoplayControllerBase2=this.getPlayingVideoUnit();this.pausePlayingVideo(c('VideoPlayerReason').PAGE_VISIBILITY);}};h.prototype.$VideoAutoplayControllerBase8=function(){'use strict';if(this.$VideoAutoplayControllerBase2){this.playVideo(this.$VideoAutoplayControllerBase2,c('VideoPlayerReason').PAGE_VISIBILITY);this.$VideoAutoplayControllerBase2=null;}};h.prototype.$VideoAutoplayControllerBase10=function(){'use strict';if(this.$VideoAutoplayControllerBase4)this.$VideoAutoplayControllerBase4.remove();this.$VideoAutoplayControllerBase4=c('Event').listen(window,'scroll',c('throttle')(this.updateAutoplay.bind(this),this.$VideoAutoplayControllerBase1));};h.prototype.$VideoAutoplayControllerBase9=function(){'use strict';return !!this.$VideoAutoplayControllerBase4;};h.prototype.getClosestVideoUnits=function(i){'use strict';return this.$VideoAutoplayControllerBase6.filter(function(j){return j.getDistanceToViewport()>=0;}).sort(function(j,k){return (j.getDistanceToViewport()-k.getDistanceToViewport());}).slice(0,i);};h.prototype.getVisibleUnits=function(){'use strict';var i=[];this.$VideoAutoplayControllerBase6.forEach(function(j){if(j.isVisible()){i.push(j);if(!j.wasVisible){j.wasVisible=true;j.logDisplayed();}}else j.wasVisible=false;});return i;};h.prototype.pausePlayingVideo=function(i){'use strict';var j=this.$VideoAutoplayControllerBase3;if(j){j.pause(i);if(c('VideoPlayerAbortLoadingExperiment').canAbort&&!j.getIsInChannel())j.abortLoading();this.$VideoAutoplayControllerBase3=null;}};h.prototype.updateAutoplay=function(){'use strict';throw new Error('Should be overridden');};f.exports=h;}),null);
__d("XVideoAutoplayNuxAsyncController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/autoplay\/nux\/",{});}),null);
__d("XVideoAutoplayNuxDismissAsyncController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/autoplay\/nux\/dismiss\/",{});}),null);
__d("XVideoAutoplayNuxLogViewAsyncController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/autoplay\/nux\/log\/view\/",{});}),null);
__d('VideoAutoplayControllerX',['csx','AsyncRequest','DOM','Event','ifRequired','SubscriptionsHandler','VideoAutoplayControllerBase','VideoPlayerExperiments','VideoPlayerPreloadExperiment','VideoPlayerReason','XVideoAutoplayNuxAsyncController','XVideoAutoplayNuxDismissAsyncController','XVideoAutoplayNuxLogViewAsyncController','destroyOnUnload','getViewportDimensions'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=null,l=500;i=babelHelpers.inherits(m,c('VideoAutoplayControllerBase'));j=i&&i.prototype;function m(){'use strict';j.constructor.call(this,l);this.$VideoAutoplayControllerX1=new (c('SubscriptionsHandler'))();this.$VideoAutoplayControllerX2=new (c('SubscriptionsHandler'))();this.$VideoAutoplayControllerX3=true;this.$VideoAutoplayControllerX4=null;this.$VideoAutoplayControllerX5=null;this.$VideoAutoplayControllerX6=false;this.$VideoAutoplayControllerX7=null;var n=c('XVideoAutoplayNuxAsyncController').getURIBuilder().getURI();new (c('AsyncRequest'))(n).send();c('destroyOnUnload')(function(){this.$VideoAutoplayControllerX8();if(this===k)k=null;}.bind(this));}m.registerVideoUnit=function(n){'use strict';if(k==null)k=new m();k.addSubscriberVideoUnit();k.addVideoUnit(n);if(c('VideoPlayerExperiments').enforceOnlyOneVideoPlayingWithAudio)k.$VideoAutoplayControllerX9(n);k.$VideoAutoplayControllerX10();if(n.isVisible())k.updateAutoplay();};m.setShouldAutoplay=function(n){'use strict';if(k==null)k=new m();k.$VideoAutoplayControllerX3=n;k.updateAutoplay();};m.prototype.$VideoAutoplayControllerX8=function(){'use strict';this.$VideoAutoplayControllerX1.release();this.$VideoAutoplayControllerX2.release();};m.setAutoplayNux=function(n,o){'use strict';if(k==null)return;k.$VideoAutoplayControllerX4=n;k.$VideoAutoplayControllerX5=o;k.$VideoAutoplayControllerX6=true;var p=c('DOM').find(o.getContentRoot(),"._5cqr");c('Event').listen(p,'click',function(){k.$VideoAutoplayControllerX11();});var q=c('DOM').scry(o.getContentRoot(),"._36gl")[0];if(q)c('Event').listen(q,'click',function(){k.$VideoAutoplayControllerX11();});};m.prototype.$VideoAutoplayControllerX11=function(){'use strict';this.$VideoAutoplayControllerX5.hide();this.$VideoAutoplayControllerX6=false;var n=c('XVideoAutoplayNuxDismissAsyncController').getURIBuilder().getURI();new (c('AsyncRequest'))(n).send();};m.prototype.setupPlayingVideoUnitSubscriptions=function(){'use strict';if(this.getPlayingVideoUnit().addListener){this.$VideoAutoplayControllerX1.release();this.$VideoAutoplayControllerX1.engage();if(!this.getPlayingVideoUnit().isLooping())this.$VideoAutoplayControllerX1.addSubscriptions(this.getPlayingVideoUnit().addListener('finishPlayback',function(){this.setPlayingVideoUnit(null);}.bind(this)));this.$VideoAutoplayControllerX1.addSubscriptions(this.getPlayingVideoUnit().addListener('turnOffAutoplay',function(){this.setPlayingVideoUnit(null);}.bind(this)),this.getPlayingVideoUnit().addListener('pausePlayback',function(){this.$VideoAutoplayControllerX10();}.bind(this)),this.getPlayingVideoUnit().addListener('finishPlayback',function(){this.$VideoAutoplayControllerX10();}.bind(this)));}};m.prototype.$VideoAutoplayControllerX10=function(){'use strict';c('ifRequired')('VideoPlayerHTML5Shaka',function(n){if(n.isAutoplayBandwidthRestrained()){if(this.$VideoAutoplayControllerX3){var o=this.getVideoUnits();for(var p=0;p<o.length;p++){var q=o[p].getVideoPlayerController();q.setLogEntryPropertyGetters({autoplay_failure_reasons:function r(){return (JSON.stringify(['poor_network_quality']));}});}}this.$VideoAutoplayControllerX3=false;}}.bind(this));};m.prototype.$VideoAutoplayControllerX9=function(n){'use strict';if(!n.addListener)return;var o=function(){var p=n.getVideoPlayerController();if(!p.isMuted()&&p.isState('playing')){if(this.$VideoAutoplayControllerX7&&this.$VideoAutoplayControllerX7!==n){var q=this.$VideoAutoplayControllerX7.getVideoPlayerController(),r=q.getOption('VideoWithLiveBroadcast','isLive');if(r){q.mute();}else q.pause(c('VideoPlayerReason').USER);}this.$VideoAutoplayControllerX7=n;}}.bind(this);this.$VideoAutoplayControllerX2.addSubscriptions(n.addListener('beginPlayback',o),n.addListener('changeVolume',o),n.addListener('unmuteVideo',o));};m.prototype.showAutoplayNUX=function(n){'use strict';if(this.$VideoAutoplayControllerX5&&!this.$VideoAutoplayControllerX5.isShown()){var o=n.getVideoPlayerController().getRootNode();c('DOM').prependContent(o,this.$VideoAutoplayControllerX4);this.$VideoAutoplayControllerX5.show();var p=c('XVideoAutoplayNuxLogViewAsyncController').getURIBuilder().getURI();new (c('AsyncRequest'))(p).send();}this.$VideoAutoplayControllerX6=false;};m.getChannelVideos=function(){'use strict';if(k)return k.getVideoUnits().filter(function(n){return n.getIsInChannel();});return null;};m.prototype.updateAutoplay=function(){'use strict';if(!this.$VideoAutoplayControllerX3){this.pausePlayingVideo(c('VideoPlayerReason').AUTOPLAY);return;}var n=this.getVisibleUnits();this.getClosestVideoUnits(c('VideoPlayerPreloadExperiment').preloadVideosCount).forEach(function(r){return r.preload();});var o=n.length,p=null;if(o==1){p=n[0];p=p.isAutoplayable()?p:null;}else if(o>1){var q=c('getViewportDimensions')().height/2;n.forEach(function(r){if(!r.isAutoplayable())return;var s=r.getDOMPosition(),t=s.y+s.height/2,u=Math.abs(t-q);r.playPriority=u;if(!p||r.playPriority<p.playPriority)p=r;});}if(this.getPlayingVideoUnit()){if(p!=this.getPlayingVideoUnit()){this.pausePlayingVideo(c('VideoPlayerReason').AUTOPLAY);this.playVideo(p,c('VideoPlayerReason').AUTOPLAY);if(this.$VideoAutoplayControllerX6)this.showAutoplayNUX(p);}}else if(p){this.playVideo(p,c('VideoPlayerReason').AUTOPLAY);if(this.$VideoAutoplayControllerX6)this.showAutoplayNUX(p);}};f.exports=m;}),null);
__d('VideoFeedRegister',['Bootloader','FeedVideoPlayerController','VideoAutoplayControllerX','VideoPlayerFeedRegisterConfig'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={registerVideoUnit:function i(j,k){var l,m=k.controller;if(k.controller.getOption('VideoWithInstreamVideo','enabled'))k.controller=k.controller.getOption('VideoWithInstreamVideo','controller');var n=new (c('FeedVideoPlayerController'))(j,k);k.controller.registerOption('WatchAndScroll','isEligible',function(){return k.wnsEnabled;});if(k.channelVersion){if((k.channelVersion!=='channel_view'||!k.channelModule.getInteraction())&&c('VideoPlayerFeedRegisterConfig').watchAndScrollModule&&c('VideoPlayerFeedRegisterConfig').watchAndScrollModule.isActive()){c('VideoPlayerFeedRegisterConfig').watchAndScrollModule.registerChannelVideoController(m);return;}if(k.channelVersion==='channel_view')k.channelModule.registerVideoController(k.controller);}else c('VideoAutoplayControllerX').registerVideoUnit(n);if(k.wnsEnabled&&c('VideoPlayerFeedRegisterConfig').watchAndScrollModule)c('VideoPlayerFeedRegisterConfig').watchAndScrollModule.registerVideoController(m,k.videoChannelCaller,c('VideoPlayerFeedRegisterConfig').watchAndScrollV3,c('VideoPlayerFeedRegisterConfig').wnsChannelsIntegrationEnabled);if(c('VideoPlayerFeedRegisterConfig').disableOffscreenPlayModule)c('VideoPlayerFeedRegisterConfig').disableOffscreenPlayModule.registerVideoUnit(n,{allowAdsToPlay:c('VideoPlayerFeedRegisterConfig').watchAndScrollV3});if(k.autoPlayWithChannelViewOrSnowlift)(function(){var o=k.controller,p=o.addListener('stateChange',function(){if(!o.isState('ready'))return;var q=o.getOption('VideoWithClickToChannelView','isChannelEligible');if(q){c('Bootloader').loadModules(["VideoChannelController"],function(r){return (r.openFromVideoPlayer(o,o.getVideoChannelID(),k.videoChannelCaller));},'VideoFeedRegister');}else c('Bootloader').loadModules(["PhotoSnowlift"],function(r){return (r.bootstrap(o.getVideoURL()));},'VideoFeedRegister');p.remove();});})();}};f.exports=h;}),null);
__d('VideoPlayerRegistry',['regeneratorRuntime','Promise','EventEmitter','Set'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=new (c('Set'))(),i=new (c('EventEmitter'))(),j={ADDED:'added',REMOVED:'removed',addListener:function k(l,m){return i.addListener(l,m);},once:function k(l,m){return i.once(l,m);},has:function k(l){return h.has(l);},add:function k(l){if(j.has(l))return false;h.add(l);i.emit(j.ADDED,l);return true;},remove:function k(l){if(!j.has(l))return false;h['delete'](l);i.emit(j.REMOVED,l);return true;},count:function k(){return h.size;},getList:function k(){return Array.from(h);},getByRootNode:function k(l){var m;return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:m=null;this.getList().forEach(function(p){if(p.getByRootNode()===l)m=p;});if(m){o.next=6;break;}o.next=5;return c('regeneratorRuntime').awrap(new (c('Promise'))(function(p,q){var r=this.addListener(j.ADDED,function(s){if(s.getRootNode()===l){r.remove();p(s);}});}.bind(this)));case 5:m=o.sent;case 6:return o.abrupt('return',m);case 7:case 'end':return o.stop();}},null,this);}};f.exports=j;}),null);
__d('VideoWithClickToChannelView',['cx','Bootloader','CSS','Map','VideoChainingCaller','VideoChannel','VideoChannelEntryPoint','VideoChannelViewGatings','VideoPlayerReason','logVideosClickTracking'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k,l,m,n,o,p,q){'use strict';this.$VideoWithClickToChannelView1=j;this.$VideoWithClickToChannelView2=k;this.$VideoWithClickToChannelView3=n;this.$VideoWithClickToChannelView4=l;this.$VideoWithClickToChannelView5=m;this.$VideoWithClickToChannelView6=new (c('Map'))();this.$VideoWithClickToChannelView7=o;this.$VideoWithClickToChannelView8=p;this.$VideoWithClickToChannelView9=q;this.$VideoWithClickToChannelView1.addListener('stateChange',this.$VideoWithClickToChannelView10.bind(this));this.$VideoWithClickToChannelView1.registerOption('VideoWithClickToChannelView','isChannelEligible',function(){return this.isChannelEligible();}.bind(this));this.$VideoWithClickToChannelView1.registerOption('VideoWithClickToChannelView','canOpenFromVideoPlayer',function(){return this.canOpenChannelView();}.bind(this));this.$VideoWithClickToChannelView1.setLogEntryPropertyGetters({channel_eligibility:'eligible'});if(this.canOpenChannelView())this.$VideoWithClickToChannelView11();this.$VideoWithClickToChannelView1.addListener('clickVideo',this.$VideoWithClickToChannelView12.bind(this));if(this.$VideoWithClickToChannelView1.hasSeenClick())this.$VideoWithClickToChannelView12();}i.prototype.$VideoWithClickToChannelView13=function(){'use strict';return this.$VideoWithClickToChannelView1.hasOption('VideoControls','available');};i.prototype.$VideoWithClickToChannelView14=function(){'use strict';this.$VideoWithClickToChannelView15('hideOnFinish');this.$VideoWithClickToChannelView15('hideOnPause');};i.prototype.$VideoWithClickToChannelView15=function(j){'use strict';var k=this.$VideoWithClickToChannelView1.getOption('VideoControls',j);this.$VideoWithClickToChannelView6.set(j,k);};i.prototype.$VideoWithClickToChannelView11=function(){'use strict';c('CSS').addClass(this.$VideoWithClickToChannelView1.getVideoNode(),"_244o");};i.prototype.$VideoWithClickToChannelView16=function(){'use strict';c('CSS').removeClass(this.$VideoWithClickToChannelView1.getVideoNode(),"_244o");};i.prototype.$VideoWithClickToChannelView10=function(){'use strict';if(this.canOpenChannelView()){this.$VideoWithClickToChannelView11();}else this.$VideoWithClickToChannelView16();};i.prototype.$VideoWithClickToChannelView12=function(){'use strict';if(!this.canOpenChannelView()){if(this.$VideoWithClickToChannelView1.isState('playing')){if(this.$VideoWithClickToChannelView1.getOption('VideoWithLiveBroadcast','isLive'))return;this.$VideoWithClickToChannelView1.pause(c('VideoPlayerReason').USER);}else{c('logVideosClickTracking')(this.$VideoWithClickToChannelView1.getVideoNode());this.$VideoWithClickToChannelView1.play(c('VideoPlayerReason').USER);}}else this.$VideoWithClickToChannelView17();};i.prototype.isChannelEligible=function(){'use strict';var j=c('VideoChannelViewGatings').allowChannelViewForFlash||this.$VideoWithClickToChannelView4===c('VideoChannelEntryPoint').VIDEO_HOME,k=!this.$VideoWithClickToChannelView1.isPlayerVersion('silvercity')||j,l=c('VideoChannelViewGatings').channelView||this.$VideoWithClickToChannelView4===c('VideoChannelEntryPoint').VIDEO_HOME;return l&&!c('VideoChannel').get()&&!this.$VideoWithClickToChannelView1.isState('fallback')&&!this.$VideoWithClickToChannelView1.isFullscreen()&&k;};i.prototype.canOpenChannelView=function(){'use strict';var j=true;if(c('VideoChannelViewGatings').channelViewWithInlineControls)if(!this.$VideoWithClickToChannelView1.isState('playing'))j=false;return this.isChannelEligible()&&j;};i.prototype.$VideoWithClickToChannelView17=function(){'use strict';c('logVideosClickTracking')(this.$VideoWithClickToChannelView1.getVideoNode());c('Bootloader').loadModules(["VideoChannelController"],function(j){j.openFromVideoPlayer(this.$VideoWithClickToChannelView1,this.$VideoWithClickToChannelView2,this.$VideoWithClickToChannelView5,this.$VideoWithClickToChannelView18());}.bind(this),'VideoWithClickToChannelView');};i.prototype.$VideoWithClickToChannelView18=function(){'use strict';if(!this.$VideoWithClickToChannelView7)return null;return {originalVideoIds:this.$VideoWithClickToChannelView7,isFromVideoViewCarousel:this.$VideoWithClickToChannelView8,shouldFetchMoreVideos:this.$VideoWithClickToChannelView9};};f.exports=i;}),null);
__d('VideoWithSequentialAutoplay',['Arbiter','SubscriptionsHandler','VideoPlayerReason','destroyOnUnload'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){'use strict';this.$VideoWithSequentialAutoplay1=i;this.$VideoWithSequentialAutoplay2=j;this.$VideoWithSequentialAutoplay1.addListener('finishPlayback',this.$VideoWithSequentialAutoplay3.bind(this));this.$VideoWithSequentialAutoplay4=new (c('SubscriptionsHandler'))();this.$VideoWithSequentialAutoplay4.addSubscriptions(c('Arbiter').subscribe('nextVideoAutoplay',function(k,l){if(l.nextVideoID==this.$VideoWithSequentialAutoplay1.getVideoID())this.$VideoWithSequentialAutoplay1.play(c('VideoPlayerReason').AUTOPLAY);}.bind(this)));c('destroyOnUnload')(function(){return this.$VideoWithSequentialAutoplay4.release();}.bind(this));}h.prototype.$VideoWithSequentialAutoplay3=function(){'use strict';c('Arbiter').inform('nextVideoAutoplay',{nextVideoID:this.$VideoWithSequentialAutoplay2});};f.exports=h;}),null);
__d('VideoPlayerRegistryComponent',['invariant','SubscriptionsHandler','VideoPlayerRegistry'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this.$VideoPlayerRegistryComponent1=j||null;this.$VideoPlayerRegistryComponent2=new (c('SubscriptionsHandler'))();if(this.$VideoPlayerRegistryComponent1)this.$VideoPlayerRegistryComponent3();}i.prototype.destroy=function(){'use strict';this.$VideoPlayerRegistryComponent4();this.$VideoPlayerRegistryComponent1=null;};i.prototype.getController=function(){'use strict';var j=this.$VideoPlayerRegistryComponent1;!j?h(0):void 0;return j;};i.prototype.enable=function(j){'use strict';if(this.$VideoPlayerRegistryComponent1&&this.$VideoPlayerRegistryComponent1!==j)this.$VideoPlayerRegistryComponent4();this.$VideoPlayerRegistryComponent1=j;this.$VideoPlayerRegistryComponent3();};i.prototype.disable=function(j){'use strict';this.$VideoPlayerRegistryComponent4();};i.prototype.$VideoPlayerRegistryComponent3=function(){'use strict';var j=this.getController();c('VideoPlayerRegistry').add(j);this.$VideoPlayerRegistryComponent2.addSubscriptions(j.addListener('stateChange',function(){if(j.isState('destroyed'))this.destroy();}.bind(this)));};i.prototype.$VideoPlayerRegistryComponent4=function(){'use strict';var j=this.getController();this.$VideoPlayerRegistryComponent2.release();this.$VideoPlayerRegistryComponent2.engage();c('VideoPlayerRegistry').remove(j);};f.exports=i;}),null);